---
// ConfirmacionAsistencia.astro
---

<section class="relative w-full py-6 px-6" id="seccion-confirmacion">
    <div class="max-w-2xl mx-auto" id="contenedor-confirmacion">
        <!-- Icono de pareja -->
        <div class="flex justify-center mb-4 icono-confirmacion opacity-0">
            <div class="w-16 h-16 md:w-20 md:h-20">
                <img
                    src="/iconos/esposo-y-esposa.png"
                    alt="Pareja"
                    class="w-full h-full object-contain filter-color"
                />
            </div>
        </div>

        <!-- Tarjeta principal con glassmorphism -->
        <div
            class="backdrop-blur-sm bg-white/40 rounded-3xl border border-[#8d9072]/20 p-8 md:p-12 shadow-sm relative overflow-hidden tarjeta-confirmacion opacity-0"
        >
            <!-- Brillo sutil animado -->
            <div
                class="absolute -top-20 -right-20 w-40 h-40 bg-gradient-to-br from-[#8d9072]/10 to-transparent rounded-full blur-3xl animate-pulse-slow"
            >
            </div>

            <div class="relative z-10 space-y-6 text-center">
                <!-- Texto introductorio -->
                <p
                    class="font-crimson text-lg md:text-base leading-relaxed uppercase"
                    style="color: #8d9072; font-weight: 300; letter-spacing: 0.05em;"
                >
                    Dios nos uni√≥ con prop√≥sito y caminamos juntos por la
                    eternidad
                </p>

                <!-- Nombres de los novios -->
                <h2
                    class="font-elegante text-3xl md:text-5xl"
                    style="color: #8d9072; font-weight: 300;"
                >
                    Juliana & Erick
                </h2>

                <!-- Punto decorativo -->
                <div class="flex justify-center">
                    <div class="w-1.5 h-1.5 rounded-full bg-[#8d9072]/40"></div>
                </div>

                <!-- Mensaje de confirmaci√≥n -->
                <p
                    class="font-crimson text-lg md:text-base leading-relaxed"
                    style="color: #8d9072; font-weight: 300;"
                >
                    Si no puedes asistir, por favor comun√≠calo a trav√©s de este
                    n√∫mero, para que podamos contactar a otros invitados a
                    nuestra boda y juntos organizar este d√≠a, en especial el
                    lugar donde nos sentemos.
                </p>

                <!-- L√≠nea decorativa -->
                <div class="flex items-center justify-center gap-2 my-6">
                    <div
                        class="w-16 h-px bg-gradient-to-r from-transparent to-[#8d9072]/30"
                    >
                    </div>
                    <div class="w-1.5 h-1.5 rounded-full bg-[#8d9072]/40"></div>
                    <div
                        class="w-16 h-px bg-gradient-to-l from-transparent to-[#8d9072]/30"
                    >
                    </div>
                </div>

                <!-- Texto de l√≠mite de fecha -->
                <p
                    class="font-crimson text-lg md:text-base uppercase"
                    style="color: #8d9072; font-weight: 400; letter-spacing: 0.1em;"
                >
                    Confirma tu asistencia antes del
                </p>

                <!-- Fecha l√≠mite -->
                <p
                    class="font-crimson text-2xl md:text-3xl"
                    style="color: #8d9072; font-weight: 400;"
                >
                    10 del mes
                </p>

                <!-- L√≠nea decorativa -->
                <div class="flex items-center justify-center gap-2 my-6">
                    <div
                        class="w-16 h-px bg-gradient-to-r from-transparent to-[#8d9072]/30"
                    >
                    </div>
                    <div class="w-1.5 h-1.5 rounded-full bg-[#8d9072]/40"></div>
                    <div
                        class="w-16 h-px bg-gradient-to-l from-transparent to-[#8d9072]/30"
                    >
                    </div>
                </div>

                <!-- Bot√≥n de confirmaci√≥n -->
                <div
                    class="flex justify-center pt-6 boton-confirmacion opacity-0"
                >
                    <a
                        href="#"
                        class="px-12 py-3 bg-[#f3f0e8] border
                    border-[#dcd9d0] rounded-full text-[#5a5a5a] font-serif
                    text-sm uppercase tracking-[0.15em] shadow-sm transition-all
                    duration-300 hover:bg-[#ebe8df] active:scale-95
                    cursor-pointer inline-block text-center no-underline"
                    >
                        Confirmar Asistencia
                    </a>
                </div>
            </div>
        </div>
    </div>

    <style>
        .font-crimson {
            font-family: "Crimson Text", serif;
        }

        .font-serif {
            font-family: "Cormorant", serif;
        }

        .font-elegante {
            font-family: "Great Vibes", cursive;
        }

        .filter-color {
            filter: brightness(0) saturate(100%) invert(62%) sepia(9%)
                saturate(936%) hue-rotate(37deg) brightness(94%) contrast(88%)
                drop-shadow(0 2px 8px rgba(141, 144, 114, 0.2));
            transition: all 0.3s ease;
        }

        .icono-confirmacion:hover .filter-color {
            filter: brightness(0) saturate(100%) invert(62%) sepia(9%)
                saturate(936%) hue-rotate(37deg) brightness(94%) contrast(88%)
                drop-shadow(0 4px 12px rgba(141, 144, 114, 0.3));
        }

        @keyframes pulse-slow {
            0%,
            100% {
                opacity: 0.4;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.05);
            }
        }

        .animate-pulse-slow {
            animation: pulse-slow 4s ease-in-out infinite;
        }

        a {
            text-decoration: none;
        }
    </style>

    <script>
        import { gsap } from "gsap";
        import { ScrollTrigger } from "gsap/ScrollTrigger";

        gsap.registerPlugin(ScrollTrigger);

        const initConfirmacion = () => {
            console.log("üíå Iniciando secci√≥n de confirmaci√≥n...");

            // Estado inicial con selectores espec√≠ficos
            gsap.set("#contenedor-confirmacion .icono-confirmacion", {
                opacity: 0,
                y: -30,
                scale: 0.8,
            });
            gsap.set("#contenedor-confirmacion .tarjeta-confirmacion", {
                opacity: 0,
                y: 40,
            });
            gsap.set("#contenedor-confirmacion .boton-confirmacion", {
                opacity: 0,
                y: 20,
            });

            // Timeline de animaci√≥n con ScrollTrigger usando ID √∫nico
            ScrollTrigger.create({
                trigger: "#seccion-confirmacion",
                start: "top 75%",
                end: "bottom 25%",

                onEnter: () => {
                    console.log("üíå Entrando a la secci√≥n de confirmaci√≥n");

                    // Animaci√≥n de entrada elegante y simult√°nea
                    gsap.to("#contenedor-confirmacion .icono-confirmacion", {
                        opacity: 1,
                        y: 0,
                        scale: 1,
                        duration: 1,
                        ease: "power3.out",
                    });

                    gsap.to("#contenedor-confirmacion .tarjeta-confirmacion", {
                        opacity: 1,
                        y: 0,
                        duration: 1,
                        ease: "power3.out",
                        delay: 0.1,
                    });

                    gsap.to("#contenedor-confirmacion .boton-confirmacion", {
                        opacity: 1,
                        y: 0,
                        duration: 1,
                        ease: "power3.out",
                        delay: 0.2,
                    });
                },

                onLeaveBack: () => {
                    console.log("üíå Saliendo de la secci√≥n de confirmaci√≥n");

                    // Animaci√≥n de salida r√°pida y simult√°nea
                    gsap.to("#contenedor-confirmacion .icono-confirmacion", {
                        opacity: 0,
                        y: -30,
                        scale: 0.8,
                        duration: 0.4,
                        ease: "power2.in",
                    });

                    gsap.to("#contenedor-confirmacion .tarjeta-confirmacion", {
                        opacity: 0,
                        y: 40,
                        duration: 0.4,
                        ease: "power2.in",
                    });

                    gsap.to("#contenedor-confirmacion .boton-confirmacion", {
                        opacity: 0,
                        y: 20,
                        duration: 0.4,
                        ease: "power2.in",
                    });
                },
            });

            console.log("üíå‚ú® Secci√≥n de confirmaci√≥n activada!");
        };

        // Ejecutar cuando el DOM est√© listo
        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", initConfirmacion);
        } else {
            initConfirmacion();
        }

        // Tambi√©n ejecutar en Astro page load
        document.addEventListener("astro:page-load", initConfirmacion);
    </script>
</section>
